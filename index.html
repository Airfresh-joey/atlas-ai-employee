<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ATLAS - AI Sales Employee (LIVE DEMO)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%);
            color: #ffffff;
            overflow-x: hidden;
        }

        .container {
            display: grid;
            grid-template-columns: 450px 1fr;
            gap: 2rem;
            padding: 2rem;
            max-width: 1800px;
            margin: 0 auto;
            min-height: 100vh;
        }

        /* WIDGET STYLES */
        .widget {
            background: #1e2139;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            height: fit-content;
            position: sticky;
            top: 2rem;
        }

        .widget-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2rem;
        }

        .widget-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .widget-title h2 {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .widget-title .icon {
            font-size: 2rem;
        }

        .status-badge {
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.85rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .status-badge.active {
            background: rgba(72, 187, 120, 0.2);
            color: #48bb78;
        }

        .status-badge.paused {
            background: rgba(246, 173, 85, 0.2);
            color: #f6ad55;
        }

        .status-badge .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: currentColor;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .uptime {
            font-size: 0.85rem;
            color: #a0aec0;
            margin-bottom: 2rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: rgba(102, 126, 234, 0.1);
            border: 1px solid rgba(102, 126, 234, 0.2);
            border-radius: 12px;
            padding: 1.25rem;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 0.25rem;
        }

        .stat-label {
            font-size: 0.85rem;
            color: #a0aec0;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .current-action {
            background: rgba(102, 126, 234, 0.1);
            border: 1px solid rgba(102, 126, 234, 0.2);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .current-action h3 {
            font-size: 0.85rem;
            color: #a0aec0;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 1rem;
        }

        .action-content {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .action-icon {
            font-size: 1.5rem;
        }

        .action-text {
            flex: 1;
        }

        .action-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .action-subtitle {
            font-size: 0.85rem;
            color: #a0aec0;
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 2px;
            transition: width 0.3s ease;
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
        }

        .btn {
            padding: 0.875rem 1.25rem;
            border: none;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .btn-pause {
            background: rgba(246, 173, 85, 0.2);
            color: #f6ad55;
            border: 1px solid rgba(246, 173, 85, 0.3);
        }

        .btn-pause:hover {
            background: rgba(246, 173, 85, 0.3);
        }

        .btn-resume {
            background: rgba(72, 187, 120, 0.2);
            color: #48bb78;
            border: 1px solid rgba(72, 187, 120, 0.3);
        }

        .btn-resume:hover {
            background: rgba(72, 187, 120, 0.3);
        }

        .btn-landing {
            background: rgba(159, 122, 234, 0.2);
            color: #9f7aea;
            border: 1px solid rgba(159, 122, 234, 0.3);
            grid-column: 1 / -1;
        }

        .btn-landing:hover {
            background: rgba(159, 122, 234, 0.3);
        }

        /* ACTIVITY FEED STYLES */
        .activity-section {
            background: #1e2139;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .activity-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2rem;
        }

        .activity-header h2 {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .speed-controls {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .speed-label {
            font-size: 0.85rem;
            color: #a0aec0;
            margin-right: 0.5rem;
        }

        .speed-btn {
            padding: 0.5rem 0.75rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.05);
            color: #a0aec0;
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .speed-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: transparent;
        }

        .speed-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .activity-feed {
            max-height: 600px;
            overflow-y: auto;
            padding-right: 1rem;
        }

        .activity-feed::-webkit-scrollbar {
            width: 8px;
        }

        .activity-feed::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        .activity-feed::-webkit-scrollbar-thumb {
            background: rgba(102, 126, 234, 0.5);
            border-radius: 4px;
        }

        .activity-item {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            margin-bottom: 0.75rem;
            border: 1px solid rgba(255, 255, 255, 0.05);
            animation: slideIn 0.3s ease;
        }

        .activity-item.linkedin {
            border-left: 3px solid #0077b5;
            background: rgba(0, 119, 181, 0.05);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .activity-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .activity-content {
            flex: 1;
        }

        .activity-title {
            font-size: 0.95rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .activity-subtitle {
            font-size: 0.85rem;
            color: #a0aec0;
        }

        .activity-preview {
            font-size: 0.8rem;
            color: #718096;
            font-style: italic;
            margin-top: 0.5rem;
            padding: 0.5rem;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 4px;
            border-left: 2px solid rgba(102, 126, 234, 0.5);
        }

        .activity-time {
            font-size: 0.75rem;
            color: #718096;
            margin-top: 0.25rem;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeIn 0.2s ease;
        }

        .modal.active {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: #1e2139;
            border-radius: 16px;
            padding: 2rem;
            max-width: 900px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2rem;
        }

        .modal-header h2 {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .close-btn {
            background: none;
            border: none;
            color: #a0aec0;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            line-height: 1;
        }

        .close-btn:hover {
            color: white;
        }

        .pipeline-grid {
            display: grid;
            gap: 1rem;
        }

        .pipeline-item {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 1.5rem;
        }

        .pipeline-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .pipeline-company {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .pipeline-contact {
            font-size: 0.9rem;
            color: #a0aec0;
        }

        .pipeline-status {
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .pipeline-status.researching {
            background: rgba(102, 126, 234, 0.2);
            color: #667eea;
        }

        .pipeline-status.contacted {
            background: rgba(72, 187, 120, 0.2);
            color: #48bb78;
        }

        .pipeline-status.responded {
            background: rgba(246, 173, 85, 0.2);
            color: #f6ad55;
        }

        .pipeline-status.meeting {
            background: rgba(159, 122, 234, 0.2);
            color: #9f7aea;
        }

        .pipeline-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
        }

        .pipeline-detail {
            font-size: 0.85rem;
        }

        .pipeline-detail-label {
            color: #718096;
            margin-bottom: 0.25rem;
        }

        .pipeline-detail-value {
            color: #e2e8f0;
            font-weight: 500;
        }

        .toast {
            position: fixed;
            top: 2rem;
            right: 2rem;
            background: #1e2139;
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 12px;
            padding: 1rem 1.5rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            gap: 1rem;
            z-index: 2000;
            animation: toastSlide 0.3s ease;
        }

        @keyframes toastSlide {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .toast-icon {
            font-size: 1.5rem;
        }

        .toast-content {
            flex: 1;
        }

        .toast-title {
            font-size: 0.95rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .toast-message {
            font-size: 0.85rem;
            color: #a0aec0;
        }

        @media (max-width: 1024px) {
            .container {
                grid-template-columns: 1fr;
            }

            .widget {
                position: relative;
                top: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- WIDGET -->
        <div class="widget">
            <div class="widget-header">
                <div class="widget-title">
                    <span class="icon">ü§ñ</span>
                    <h2>ATLAS</h2>
                </div>
                <div class="status-badge active" id="statusBadge">
                    <span class="dot"></span>
                    <span id="statusText">ACTIVE</span>
                </div>
            </div>

            <div class="uptime" id="uptime">‚è±Ô∏è Running for 47h 23m</div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="prospectsCount">0</div>
                    <div class="stat-label">Prospects Today</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="emailsCount">0</div>
                    <div class="stat-label">Emails Sent</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="responsesCount">0</div>
                    <div class="stat-label">Responses</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="meetingsCount">0</div>
                    <div class="stat-label">Meetings Booked</div>
                </div>
            </div>

            <div class="current-action">
                <h3>Current Action</h3>
                <div class="action-content">
                    <span class="action-icon" id="actionIcon">üîç</span>
                    <div class="action-text">
                        <div class="action-title" id="actionTitle">Researching prospect</div>
                        <div class="action-subtitle" id="actionSubtitle">Loading...</div>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
            </div>

            <div class="controls">
                <button class="btn btn-primary" onclick="viewPipeline()">VIEW PIPELINE</button>
                <button class="btn btn-secondary" onclick="showSettings()">SETTINGS</button>
                <button class="btn btn-pause" id="pauseBtn" onclick="togglePause()">PAUSE</button>
                <a href="./demo-landing.html" target="_blank" class="btn btn-landing" style="text-decoration: none; text-align: center;">
                    üåê VIEW DEMO PAGE
                </a>
            </div>
        </div>

        <!-- ACTIVITY FEED -->
        <div class="activity-section">
            <div class="activity-header">
                <h2>üî• Live Activity Feed</h2>
                <div class="speed-controls">
                    <span class="speed-label">Speed:</span>
                    <button class="speed-btn active" onclick="setSpeed(1)">1x</button>
                    <button class="speed-btn" onclick="setSpeed(2)">2x</button>
                    <button class="speed-btn" onclick="setSpeed(5)">5x</button>
                    <button class="speed-btn" onclick="setSpeed(10)">10x</button>
                </div>
            </div>
            <div class="activity-feed" id="activityFeed">
                <!-- Activity items will be added here -->
            </div>
        </div>
    </div>

    <!-- PIPELINE MODAL -->
    <div class="modal" id="pipelineModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üìä Sales Pipeline</h2>
                <button class="close-btn" onclick="closePipeline()">√ó</button>
            </div>
            <div class="pipeline-grid" id="pipelineGrid">
                <!-- Pipeline items will be added here -->
            </div>
        </div>
    </div>

    <script>
        // State
        let state = {
            active: true,
            speed: 1,
            prospects: 26,
            emails: 19,
            responses: 3,
            meetings: 1,
            uptime: 47 * 60 + 23, // minutes
            currentAction: null,
            progress: 0,
            activities: [],
            pipeline: []
        };

        // Prospect data
        const companies = [
            { name: "Apex Construction LLC", contact: "Mike Davis", industry: "Construction", employees: "150-200", stage: "researching" },
            { name: "TechFlow Solutions", contact: "Sarah Chen", industry: "IT Services", employees: "50-100", stage: "contacted" },
            { name: "Anslow Bryant", contact: "Jeremy Anslow", industry: "Construction", employees: "200-500", stage: "meeting" },
            { name: "Precision Manufacturing", contact: "Lisa Martinez", industry: "Manufacturing", employees: "100-150", stage: "responded" },
            { name: "Summit IT Services", contact: "David Kim", industry: "IT Services", employees: "75-125", stage: "researching" },
            { name: "Urban Builders Co", contact: "Robert Thompson", industry: "Construction", employees: "180-220", stage: "contacted" },
            { name: "DataTech Systems", contact: "Emily Wong", industry: "IT Services", employees: "60-90", stage: "researching" },
            { name: "Skyline Construction", contact: "James Porter", industry: "Construction", employees: "250-300", stage: "responded" }
        ];

        // LinkedIn comment templates
        const linkedinComments = [
            "Great insights on {topic}! This resonates with what we're seeing in the {industry} space.",
            "Spot on, {contact}. The {topic} challenge is real. Would love to hear more about how you're tackling this.",
            "This is exactly what {industry} leaders need to hear. Thanks for sharing, {contact}!",
            "Couldn't agree more. We're seeing similar trends with {industry} clients.",
            "Powerful perspective on {topic}. The data you shared is compelling!"
        ];

        // LinkedIn topics
        const linkedinTopics = [
            "scaling operations", "AI adoption", "team productivity", "digital transformation",
            "growth strategy", "operational efficiency", "market expansion", "automation"
        ];

        // LinkedIn DM templates
        const linkedinMessages = [
            "Hi {contact}, saw your recent post on {topic} ‚Äî really resonated. We help {industry} companies solve exactly that challenge. Worth a quick chat?",
            "Hey {contact}, loved your take on {topic}. I work with {industry} leaders facing similar issues. Mind if I share how we've helped others? Here's a quick overview: {link}",
            "Hi {contact}, your insights on {topic} caught my attention. We've built something that might help {company}. Check it out: {link}"
        ];

        const actions = [
            { icon: "üîç", title: "Researching prospect", type: "research" },
            { icon: "‚úçÔ∏è", title: "Writing email", type: "write" },
            { icon: "üìß", title: "Sending email", type: "send" },
            { icon: "üí¨", title: "Commenting on LinkedIn post", type: "linkedin_comment" },
            { icon: "ü§ù", title: "Sending LinkedIn connection request", type: "linkedin_connect" },
            { icon: "üíº", title: "Sending LinkedIn message", type: "linkedin_message" },
            { icon: "üîÑ", title: "Following up", type: "followup" },
            { icon: "üìä", title: "Analyzing response", type: "analyze" },
            { icon: "üåê", title: "Generating landing page", type: "webpage" }
        ];

        // Initialize
        function init() {
            state.pipeline = companies.slice(0, 5);
            updateStats();
            updateUptime();
            nextAction();
            setInterval(() => {
                if (state.active) {
                    state.uptime++;
                    updateUptime();
                }
            }, 60000 / state.speed);
        }

        // Update stats display
        function updateStats() {
            document.getElementById('prospectsCount').textContent = state.prospects;
            document.getElementById('emailsCount').textContent = state.emails;
            document.getElementById('responsesCount').textContent = state.responses;
            document.getElementById('meetingsCount').textContent = state.meetings;
        }

        // Update uptime display
        function updateUptime() {
            const hours = Math.floor(state.uptime / 60);
            const minutes = state.uptime % 60;
            document.getElementById('uptime').textContent = `‚è±Ô∏è Running for ${hours}h ${minutes}m`;
        }

        // Next action
        function nextAction() {
            if (!state.active) return;

            // Pick random action and company
            const action = actions[Math.floor(Math.random() * actions.length)];
            const company = companies[Math.floor(Math.random() * companies.length)];

            state.currentAction = { ...action, company };
            state.progress = 0;

            // Update UI
            document.getElementById('actionIcon').textContent = action.icon;
            document.getElementById('actionTitle').textContent = action.title;
            document.getElementById('actionSubtitle').textContent = `${company.name} ‚Äî ${company.industry}`;

            // Animate progress
            const duration = (8000 + Math.random() * 4000) / state.speed;
            const interval = 50;
            const increment = (100 / duration) * interval;

            const progressInterval = setInterval(() => {
                if (!state.active) {
                    clearInterval(progressInterval);
                    return;
                }

                state.progress += increment;
                document.getElementById('progressFill').style.width = Math.min(state.progress, 100) + '%';

                if (state.progress >= 100) {
                    clearInterval(progressInterval);
                    completeAction();
                }
            }, interval);
        }

        // Complete action
        function completeAction() {
            const action = state.currentAction;
            
            // Add to activity feed
            addActivity(action);

            // Update stats based on action type
            if (action.type === 'research') {
                state.prospects++;
                if (Math.random() > 0.4) {
                    setTimeout(() => nextAction(), 1000 / state.speed);
                }
            } else if (action.type === 'send') {
                state.emails++;
                if (Math.random() > 0.92) {
                    showToast('üì¨ Response Received!', `${action.company.contact} replied to your email`);
                    state.responses++;
                    if (Math.random() > 0.85) {
                        setTimeout(() => {
                            showToast('üéâ Meeting Booked!', `${action.company.contact} scheduled a meeting`);
                            state.meetings++;
                            updateStats();
                        }, 2000 / state.speed);
                    }
                }
            } else if (action.type === 'linkedin_comment') {
                // After commenting, trigger connection request
                setTimeout(() => {
                    const connectAction = actions.find(a => a.type === 'linkedin_connect');
                    state.currentAction = { ...connectAction, company: action.company };
                    state.progress = 0;
                    document.getElementById('actionIcon').textContent = connectAction.icon;
                    document.getElementById('actionTitle').textContent = connectAction.title;
                    setTimeout(() => completeAction(), 5000 / state.speed);
                }, 3000 / state.speed);
                return; // Don't go to next action yet
            } else if (action.type === 'linkedin_connect') {
                showToast('ü§ù Connection Accepted!', `${action.company.contact} accepted your request`);
                // After connection accepted, send message
                setTimeout(() => {
                    const messageAction = actions.find(a => a.type === 'linkedin_message');
                    state.currentAction = { ...messageAction, company: action.company };
                    state.progress = 0;
                    document.getElementById('actionIcon').textContent = messageAction.icon;
                    document.getElementById('actionTitle').textContent = messageAction.title;
                    setTimeout(() => completeAction(), 4000 / state.speed);
                }, 2000 / state.speed);
                return;
            } else if (action.type === 'linkedin_message') {
                if (Math.random() > 0.90) {
                    showToast('üí¨ LinkedIn Reply!', `${action.company.contact} responded to your message`);
                    state.responses++;
                }
            }

            updateStats();

            // Next action
            setTimeout(() => nextAction(), (2000 + Math.random() * 3000) / state.speed);
        }

        // Add activity to feed
        function addActivity(action) {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });
            const company = action.company;

            let preview = '';
            let className = 'activity-item';

            // Generate preview text for LinkedIn actions
            if (action.type === 'linkedin_comment') {
                const topic = linkedinTopics[Math.floor(Math.random() * linkedinTopics.length)];
                const template = linkedinComments[Math.floor(Math.random() * linkedinComments.length)];
                preview = template
                    .replace('{topic}', topic)
                    .replace('{contact}', company.contact.split(' ')[0])
                    .replace('{industry}', company.industry);
                className += ' linkedin';
            } else if (action.type === 'linkedin_connect') {
                preview = `Hi ${company.contact.split(' ')[0]}, I noticed we're both in the ${company.industry} space. Would love to connect!`;
                className += ' linkedin';
            } else if (action.type === 'linkedin_message') {
                const topic = linkedinTopics[Math.floor(Math.random() * linkedinTopics.length)];
                const template = linkedinMessages[Math.floor(Math.random() * linkedinMessages.length)];
                preview = template
                    .replace('{contact}', company.contact.split(' ')[0])
                    .replace('{topic}', topic)
                    .replace('{industry}', company.industry)
                    .replace('{company}', company.name)
                    .replace('{link}', 'atlas-sales-employee.vercel.app/demo-landing.html');
                className += ' linkedin';
            }

            const previewHTML = preview ? `<div class="activity-preview">"${preview}"</div>` : '';

            const activityHTML = `
                <div class="${className}">
                    <div class="activity-icon">${action.icon}</div>
                    <div class="activity-content">
                        <div class="activity-title">${action.title}</div>
                        <div class="activity-subtitle">${company.name} ‚Äî ${company.contact}</div>
                        ${previewHTML}
                        <div class="activity-time">Just now ‚Ä¢ ${timeStr}</div>
                    </div>
                </div>
            `;

            const feed = document.getElementById('activityFeed');
            feed.insertAdjacentHTML('afterbegin', activityHTML);

            // Keep only last 50 activities
            while (feed.children.length > 50) {
                feed.removeChild(feed.lastChild);
            }
        }

        // Toggle pause
        function togglePause() {
            state.active = !state.active;
            const statusBadge = document.getElementById('statusBadge');
            const statusText = document.getElementById('statusText');
            const pauseBtn = document.getElementById('pauseBtn');

            if (state.active) {
                statusBadge.className = 'status-badge active';
                statusText.textContent = 'ACTIVE';
                pauseBtn.className = 'btn btn-pause';
                pauseBtn.textContent = 'PAUSE';
                nextAction();
            } else {
                statusBadge.className = 'status-badge paused';
                statusText.textContent = 'PAUSED';
                pauseBtn.className = 'btn btn-resume';
                pauseBtn.textContent = 'RESUME';
                document.getElementById('progressFill').style.width = '0%';
                document.getElementById('actionSubtitle').textContent = 'Work suspended by user';
            }
        }

        // Set speed
        function setSpeed(speed) {
            state.speed = speed;
            
            // Update button states
            document.querySelectorAll('.speed-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // View pipeline
        function viewPipeline() {
            const grid = document.getElementById('pipelineGrid');
            grid.innerHTML = state.pipeline.map(company => `
                <div class="pipeline-item">
                    <div class="pipeline-header">
                        <div>
                            <div class="pipeline-company">${company.name}</div>
                            <div class="pipeline-contact">${company.contact}</div>
                        </div>
                        <div class="pipeline-status ${company.stage}">${company.stage}</div>
                    </div>
                    <div class="pipeline-details">
                        <div class="pipeline-detail">
                            <div class="pipeline-detail-label">Industry</div>
                            <div class="pipeline-detail-value">${company.industry}</div>
                        </div>
                        <div class="pipeline-detail">
                            <div class="pipeline-detail-label">Employees</div>
                            <div class="pipeline-detail-value">${company.employees}</div>
                        </div>
                    </div>
                </div>
            `).join('');

            document.getElementById('pipelineModal').classList.add('active');
        }

        // Close pipeline
        function closePipeline() {
            document.getElementById('pipelineModal').classList.remove('active');
        }

        // Show settings
        function showSettings() {
            showToast('‚öôÔ∏è Settings', 'Configuration panel coming soon');
        }

        // Show toast notification
        function showToast(title, message) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.innerHTML = `
                <div class="toast-icon">‚ú®</div>
                <div class="toast-content">
                    <div class="toast-title">${title}</div>
                    <div class="toast-message">${message}</div>
                </div>
            `;
            document.body.appendChild(toast);

            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // Close modal on outside click
        document.getElementById('pipelineModal').addEventListener('click', (e) => {
            if (e.target.id === 'pipelineModal') {
                closePipeline();
            }
        });

        // Start
        init();

        // Welcome message
        setTimeout(() => {
            showToast('üöÄ ATLAS is LIVE', 'AI Sales Employee is now operational');
        }, 1000);
    </script>
</body>
</html>
